<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
<title>JSSpec results</title>
<link rel="stylesheet" type="text/css" href="JSSpec.css" />
<script type="text/javascript" src="diff_match_patch.js"></script>
<script type="text/javascript" src="JSSpec.js"></script>
<script type="text/javascript" src="../js/jquery-1.2.6.js"></script>
<script type="text/javascript" src="../js/jquery.command_line.js"></script>
<script type="text/javascript">
  describe('Command Line', {
    before: function(){
      // Setup the command line
      cl = $('#console').commandLine().data('commandLine.instance');
    },
    
    after: function(){
      // Remove the command line
      $('#console').data('commandLine.instance', null);
      $('#console').html('');
    },
    
    'Should have a log': function() {
      value_of($('#console .log')).should_not_be_empty();
    },
    
    'Should have a prompt': function() {
      value_of($('#console .prompt')).should_not_be_empty();
    },
    
    'Entering valid commands should log them to the screen': function(){
      cl.command('1+1');
      value_of($('#console .log .command').length).should_be(1);
      value_of($('#console .log .command').text()).should_be('1+1');
    },
    
    'Entering commands should clear the prompt': function(){
      cl.prompt.val("1+1");
      cl.command(cl.prompt.val());
      value_of($('#console .prompt').val()).should_be_empty();
    },
    
    'Entering valid commands should log them to the screen': function(){
      cl.command('1+1');
      cl.command('"a"');
      var responses = $('#console .log .response');
      
      value_of(responses.length).should_be(2);
      value_of($(responses[0]).text()).should_be('2');
      value_of($(responses[1]).text()).should_be('a');
    },
    
    'Console should display Arrays': function(){
      cl.command('[1,2,3]');
      value_of($('#console .log .response')).should_not_be_empty();
      value_of($('#console .log .response').text()).should_be('1,2,3');
    },
    
    'Console should display Functions': function(){
      cl.command('f = function(x){x+1}');
      value_of($('#console .log .response')).should_not_be_empty();
      delete f;
    },
    
  })
</script>
</head>
<body>
  <div id='test_body' style='display: none'>
    <div id='console'></div>
  </div>
</body>
</html>
